{"ast":null,"code":"import _toConsumableArray from\"/Users/patrick/ape_code/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{useD3}from'./hooks/useD3';import React from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BarChart(_ref){var data=_ref.data;var ref=useD3(function(svg){var height=500;var width=500;var margin={top:20,right:30,bottom:30,left:40};var x=d3.scaleBand().domain(data.map(function(d){return d.year;})).rangeRound([margin.left,width-margin.right]).padding(0.1);var y1=d3.scaleLinear().domain([0,d3.max(data,function(d){return d.sales;})]).rangeRound([height-margin.bottom,margin.top]);var xAxis=function xAxis(g){return g.attr(\"transform\",\"translate(0,\".concat(height-margin.bottom,\")\")).call(d3.axisBottom(x).tickValues(d3.ticks.apply(d3,_toConsumableArray(d3.extent(x.domain())).concat([width/40])).filter(function(v){return x(v)!==undefined;})).tickSizeOuter(0));};var y1Axis=function y1Axis(g){return g.attr(\"transform\",\"translate(\".concat(margin.left,\",0)\")).style(\"color\",\"steelblue\").call(d3.axisLeft(y1).ticks(null,\"s\")).call(function(g){return g.select(\".domain\").remove();}).call(function(g){return g.append(\"text\").attr(\"x\",-margin.left).attr(\"y\",10).attr(\"fill\",\"currentColor\").attr(\"text-anchor\",\"start\").text(data.y1);});};svg.select(\".x-axis\").call(xAxis);svg.select(\".y-axis\").call(y1Axis);svg.select(\".plot-area\").attr(\"fill\",\"steelblue\").selectAll(\".bar\").data(data).join(\"rect\").attr(\"class\",\"bar\").attr(\"x\",function(d){return x(d.year);}).attr(\"width\",x.bandwidth()).attr(\"y\",function(d){return y1(d.sales);}).attr(\"height\",function(d){return y1(0)-y1(d.sales);});},[data.length]);return/*#__PURE__*/_jsxs(\"svg\",{ref:ref,style:{height:500,width:\"100%\",marginRight:\"0px\",marginLeft:\"0px\"},children:[/*#__PURE__*/_jsx(\"g\",{className:\"plot-area\"}),/*#__PURE__*/_jsx(\"g\",{className:\"x-axis\"}),/*#__PURE__*/_jsx(\"g\",{className:\"y-axis\"})]});}export default BarChart;","map":{"version":3,"sources":["/Users/patrick/ape_code/src/BarChart.js"],"names":["useD3","React","d3","BarChart","data","ref","svg","height","width","margin","top","right","bottom","left","x","scaleBand","domain","map","d","year","rangeRound","padding","y1","scaleLinear","max","sales","xAxis","g","attr","call","axisBottom","tickValues","ticks","extent","filter","v","undefined","tickSizeOuter","y1Axis","style","axisLeft","select","remove","append","text","selectAll","join","bandwidth","length","marginRight","marginLeft"],"mappings":"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","sourcesContent":["import { useD3 } from './hooks/useD3';\n\nimport React from 'react';\n\nimport * as d3 from 'd3';\n\n\nfunction BarChart({ data }) {\n\n  const ref = useD3(\n\n    (svg) => {\n\n      const height = 500;\n\n      const width = 500;\n\n      const margin = { top: 20, right: 30, bottom: 30, left: 40 };\n\n\n      const x = d3\n\n        .scaleBand()\n\n        .domain(data.map((d) => d.year))\n\n        .rangeRound([margin.left, width - margin.right])\n\n        .padding(0.1);\n\n\n      const y1 = d3\n\n        .scaleLinear()\n\n        .domain([0, d3.max(data, (d) => d.sales)])\n\n        .rangeRound([height - margin.bottom, margin.top]);\n\n\n      const xAxis = (g) =>\n\n        g.attr(\"transform\", `translate(0,${height - margin.bottom})`).call(\n\n          d3\n\n            .axisBottom(x)\n\n            .tickValues(\n\n              d3\n\n                .ticks(...d3.extent(x.domain()), width / 40)\n\n                .filter((v) => x(v) !== undefined)\n\n            )\n\n            .tickSizeOuter(0)\n\n        );\n\n\n      const y1Axis = (g) =>\n\n        g\n\n          .attr(\"transform\", `translate(${margin.left},0)`)\n\n          .style(\"color\", \"steelblue\")\n\n          .call(d3.axisLeft(y1).ticks(null, \"s\"))\n\n          .call((g) => g.select(\".domain\").remove())\n\n          .call((g) =>\n\n            g\n\n              .append(\"text\")\n\n              .attr(\"x\", -margin.left)\n\n              .attr(\"y\", 10)\n\n              .attr(\"fill\", \"currentColor\")\n\n              .attr(\"text-anchor\", \"start\")\n\n              .text(data.y1)\n\n          );\n\n\n      svg.select(\".x-axis\").call(xAxis);\n\n      svg.select(\".y-axis\").call(y1Axis);\n\n\n      svg\n\n        .select(\".plot-area\")\n\n        .attr(\"fill\", \"steelblue\")\n\n        .selectAll(\".bar\")\n\n        .data(data)\n\n        .join(\"rect\")\n\n        .attr(\"class\", \"bar\")\n\n        .attr(\"x\", (d) => x(d.year))\n\n        .attr(\"width\", x.bandwidth())\n\n        .attr(\"y\", (d) => y1(d.sales))\n\n        .attr(\"height\", (d) => y1(0) - y1(d.sales));\n\n    },\n\n    [data.length]\n\n  );\n\n\n  return (\n\n    <svg\n\n      ref={ref}\n\n      style={{\n\n        height: 500,\n\n        width: \"100%\",\n\n        marginRight: \"0px\",\n\n        marginLeft: \"0px\",\n\n      }}\n\n    >\n\n      <g className=\"plot-area\" />\n\n      <g className=\"x-axis\" />\n\n      <g className=\"y-axis\" />\n\n    </svg>\n\n  );\n\n}\n\n\nexport default BarChart;"]},"metadata":{},"sourceType":"module"}